<div class="grid">
    <div class="container">
        <div class="background"></div>

        <div class="d-flex justify-content-center">
            <div class="logo_container">
                <div class="logo"></div>
            </div>
        </div>

        <div class="d-flex justify-content-center flex-column content">
            
            <div class="row">
                <h3 class="text-center" i18n>{{'Login-Title' | translate}}</h3>
            </div>

            <form [formGroup]="loginForm" (ngSubmit)="submit()">
                
                <div class="form-row text-danger validations text-center" [class.d-none]="!hasFormErrors()">
                    
                    <div [class.d-none]="!loginForm.errors?.invalid">
                        {{'Login-Errors-Invalid' | translate}}
                        <button #popover type="button" data-bs-placement="right" data-bs-trigger="focus" attr.data-bs-content="{{'Login-Errors-Invalid-Help' | translate }}">
                            <i class="fas fa-question-circle fa-lg"></i>
                        </button>
                    </div>
                    
                    <div [class.d-none]="!loginForm.errors?.internalServerError">{{'Login-Errors-InternalServerError' | translate}}</div>

                </div>
                <div class="border-bottom border-danger separator mb-2" [class.hidden]="!hasFormErrors()"></div>

                <div class="form-row mb-3">
                    <app-login-input icon="user"
                        [placeholder]="'Login-Username' | translate"
                        [formGroup]="loginForm" [controlName]="'username'" 
                        [isInvalid]="loginForm.controls['username'].invalid && (loginForm.controls['username'].dirty || loginForm.controls['username'].touched)"
                        [autofocus]="true"
                    >
                        <div validations>
                            <div [class.d-none]="!loginForm.controls['username'].errors?.required">{{ 'Login-Username-Required' | translate}}</div>
                        </div>
                    </app-login-input>
                </div>

                <div class="form-row mb-2">
                    <app-login-input icon="key"
                        type="password"
                        [placeholder]="'Login-Password' | translate"
                        [formGroup]="loginForm" [controlName]="'password'" 
                        [isInvalid]="loginForm.controls['password'].invalid && (loginForm.controls['password'].dirty || loginForm.controls['password'].touched)"
                    >
                        <div validations>
                            <div [class.d-none]="!loginForm.controls['password'].errors?.required">{{'Login-Password-Required' | translate}}</div>
                        </div>
                    </app-login-input>
                </div>

                <div class="d-flex flex-row pt-1">
                    <div class="flex-grow-1 pt-1">
                        <div class="form-check form-switch align-items-end">
                            <input class="form-check-input" type="checkbox" id="customControlInline" formControlName="rememberMe">
                            <label class="form-check-label" for="customControlInline">{{'Login-RememberMe' | translate}}</label>
                        </div>
                    </div>

                    <app-select-language></app-select-language>
                </div>


                <div class="form-row">
                    <div class="d-flex justify-content-center mt-3 login_container">
                        <button type="submit" class="btn"
                            [class.btn-login]="!hasFormErrors() && !success"
                            [disabled]="loginForm.disabled"
                            [class.btn-danger]="hasFormErrors()"
                            [class.btn-success]="success"
                        >
                            <i *ngIf="!hasFormErrors() && !loginForm.disabled" class="fas fa-sign-in-alt me-2"></i>
                            <i *ngIf="loginForm.disabled && !success" class="spinner-border spinner-border-sm me-2"></i>
                            <i *ngIf="hasFormErrors() && !loginForm.disabled" class="fas fa-exclamation-circle me-2"></i>
                            <i *ngIf="success" class="fas fa-check me-2"></i>

                            {{'Login-SignIn' | translate }}
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <div class="copyright">
        <div class="d-flex flex-row justify-content-between">
            <span [innerHTML]="'Copyright' | translate"></span>
            <span>{{'DesignBy' | translate }}</span>
        </div>
    </div>
</div>